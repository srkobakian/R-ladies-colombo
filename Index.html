<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Around the world in 30 minutes</title>
    <meta charset="utf-8" />
    <meta name="author" content="Stephanie Kobakian" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">






&lt;img src="images/titleimg.png" style="width 100%;"/&gt;

---

class: top


&lt;img src="images/qut_crest.png" style="position:absolute;bottom:400px;right:200px;height:200px;width:200px;" /&gt;

&lt;img src="images/monash_crest.jpg" style="position:absolute;bottom:100px;right:200px;height:200px;width:200px;" /&gt;


# About me

### &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"&gt;&lt;/path&gt;&lt;/svg&gt; srkobakian

Master of Philosophy in Statistics (QUT)

Bachelor of Commerce, Bachelor of Economics

I live in Melbourne, Australia

???

I spent most of my masters researching map displays used in Cancer Atlases.
To explore the use of alternative displays, and select one that would work for Australia.

We couldn't find one that would really improve the choropleth map display

---

class: top, center, inverse

&lt;img src="https://media.giphy.com/media/SufoKsersIO2Y/giphy.gif"  style="position:absolute;bottom:50px;left:40%;height:50%;width:20%;" /&gt;

# Ask me a question

### Use the chat
### Answer in discussion time

???

Now there may have been some terms I used that are unfamiliar to you. And that is great because it means I may get to teach you something today.
So If you have a question during the talk, use the chat to send it through, we may answer it as the presentation continues but if we don't i'll address it in the discussion time.
 
---
class: top, center

# What can you do with ggplot2?

--

## Use the Grammar of Graphics to build visulisations


&lt;img src="https://prital.netlify.app/talks/rladies2021/fig/7_GG.png" style="position:absolute;height:50%;width:20%;left:40%;" /&gt;

---

# What is the geom for mapping?

--

## This is not a simple question

## There are many types of maps

ggplot2: Elegant Graphics for Data Analysis:

[Chapter 6: Maps](https://ggplot2-book.org/maps.html)


&lt;img src="https://ggplot2-book.org/cover.jpg" style="position:absolute;left:60%;bottom:25%;height:60%;width:25%;" /&gt;


???

This is not a simple question
There are many ways to map

What do we have to work with?


---

# What do we need to plot?


.pull-left[

Libraries

```r
library(ggplot2)
library(maps)
```

Data 

```r
world &lt;- map_data("world")

Australia &lt;- world %&gt;% filter(region == "Australia") 

Australia
```


]

.pull-right[



```
##       long       lat group order    region                   subregion
## 1 123.5945 -12.42568   133  7115 Australia Ashmore and Cartier Islands
## 2 123.5952 -12.43594   133  7116 Australia Ashmore and Cartier Islands
## 3 123.5732 -12.43418   133  7117 Australia Ashmore and Cartier Islands
## 4 123.5725 -12.42393   133  7118 Australia Ashmore and Cartier Islands
## 5 123.5945 -12.42568   133  7119 Australia Ashmore and Cartier Islands
## 6 158.8788 -54.70976   139  7267 Australia            Macquarie Island
```

]

---

# Mapping Data

.pull-left[




```r
  ggplot(Australia) + 
  geom_point(aes(x = long, y = lat))
```

&lt;img src="Index_files/figure-html/auspoints-1.png" width="3600" /&gt;
]

.pull-right[


```r
  ggplot(Australia) + 
  geom_line(aes(x = long, y = lat))
```

&lt;img src="Index_files/figure-html/ausline-1.png" width="3600" /&gt;

]

???

These points are what we need for a map.
But it is about how you use them.


---

# Polygon Mapping

.pull-left[


```r
  ggplot(Australia) + 
*  geom_polygon(aes(x = long, y = lat, group = group))
```

&lt;img src="Index_files/figure-html/auspolygon-1.png" width="3600" /&gt;
]

.pull-right[

### This is a great start
 
 - It looks like Australia!
 - Borders are clear
 - Islands are also clear
 
### How can we improve this?


]


???

Polygons are very similar to paths (as drawn by geom_path()) except that the start and end points are connected and the inside is coloured by fill. 

---

class: middle, center, inverse


# SF system

---

## Simple Features

### Key difference:

### geometry list-column

--
Converts many, many rows

into a single row per area



Geometries fit together,

like puzzle pieces

&lt;img src="images/sfAH.jpg" style="position:absolute;right:2%;bottom:15%;height:80%;width:60%;" /&gt;

.footnote[
[2] https://r-spatial.github.io/sf/index.html
]

---

# ozmaps package

.pull-left[


```r
library(sf)
library(ozmaps)
sf_oz &lt;- ozmap_data("country")
sf_oz %&gt;% kable()
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; NAME &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; geometry &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((144.8691 -4... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;



```r
*ggplot(sf_oz) + geom_sf()
```

]
.pull-right[


&lt;img src="Index_files/figure-html/unnamed-chunk-1-1.png" width="3600" /&gt;
]

---
.pull-left[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; NAME &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; geometry &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; New South Wales &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((150.7016 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Victoria &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((146.6196 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Queensland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((148.8473 -2... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; South Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((137.3481 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Western Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((126.3868 -1... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasmania &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((147.8397 -4... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Northern Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((136.3669 -1... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australian Capital Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((149.2317 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Other Territories &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((167.9333 -2... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[


```r
sf_states &lt;- ozmap_data("states")

ggplot(sf_states) + geom_sf()
```

&lt;img src="Index_files/figure-html/ozmapstates2-1.png" width="3600" /&gt;

]


---

class: middle, center, inverse

# Creating Choropleth maps

### A choropleth maps fills regions on the maps according to their data value

--

## We need two things:

### Map and Data


---

# Data: COVID LIVE Australia


```r
*library(rvest)
*library(polite)

covid_url &lt;- "https://covidlive.com.au/report/cases"

covid_data &lt;- bow(covid_url) %&gt;% 
  scrape() %&gt;% 
  html_table() %&gt;% 
  purrr::pluck(2) %&gt;% 
  as_tibble()

covid_data
```

```
## # A tibble: 9 x 5
##   STATE      CASES  OSEAS VAR     NET
##   &lt;chr&gt;      &lt;chr&gt;  &lt;int&gt; &lt;lgl&gt; &lt;int&gt;
## 1 Victoria   20,479    NA NA        0
## 2 NSW        5,150      1 NA        1
## 3 Queensland 1,323      2 NA        2
## 4 WA         912        1 NA        1
## 5 SA         610       NA NA        0
## 6 Tasmania   234       NA NA        0
## 7 ACT        118       NA NA        0
## 8 NT         104       NA NA        0
## 9 Australia  28,930     4 NA        4
```


&lt;img src="images/covidlive.png" style="position:absolute;bottom:2%;right:2%;height:90%;width:50%;" /&gt;

---


.pull-left[

# Data &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; STATE &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; CASES &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; OSEAS &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; NET &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Victoria &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 20,479 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NSW &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5,150 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Queensland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1,323 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; WA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 912 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; SA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 610 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasmania &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ACT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 118 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 104 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 28,930 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[

# Map &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; NAME &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; geometry &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; New South Wales &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((150.7016 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Victoria &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((146.6196 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Queensland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((148.8473 -2... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; South Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((137.3481 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Western Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((126.3868 -1... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasmania &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((147.8397 -4... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Northern Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((136.3669 -1... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australian Capital Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((149.2317 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Other Territories &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((167.9333 -2... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---

# To join the Covid data to the map

--
.pull-left[
### - Expand the abbreviations so the names match
### - Convert cases to numeric values


```r
covid_data &lt;- covid_data %&gt;% 
  mutate(STATE = case_when(
    # replace the abbreviations 
     STATE == "NSW" ~ "New South Wales",
     STATE == "WA" ~ "Western Australia",
     STATE == "SA" ~ "South Australia",
     STATE == "NT" ~ "Northern Territory",
     STATE == "ACT" ~ "Australian Capital Territory",
    # keep the rest of the state names
     TRUE ~ STATE )) %&gt;% 
  
  mutate(CASES = parse_number(CASES))
```
]

.pull-right[

### - Peform a join


```r
covid_states &lt;- left_join(ozmap_states, covid_data,
                   by = c("NAME" = "STATE"))
```

### - Remove the "Other Territories"


```r
covid_states &lt;- covid_states %&gt;% 
              filter(!(NAME == "Other Territories"))
```

]

---


.pull-left[

# Data &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; STATE &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CASES &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; OSEAS &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; NET &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Victoria &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20479 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; New South Wales &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5150 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Queensland &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1323 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Western Australia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 912 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; South Australia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 610 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasmania &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australian Capital Territory &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 118 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Northern Territory &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 104 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28930 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[

# Map &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; NAME &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; geometry &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; New South Wales &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((150.7016 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Victoria &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((146.6196 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Queensland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((148.8473 -2... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; South Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((137.3481 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Western Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((126.3868 -1... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasmania &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((147.8397 -4... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Northern Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((136.3669 -1... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australian Capital Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((149.2317 -3... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Other Territories &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((167.9333 -2... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

.pull-left[

# Complete map data &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; NAME &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; geometry &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CASES &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; OSEAS &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; NET &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; New South Wales &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((150.7016 -3... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5150 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Victoria &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((146.6196 -3... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20479 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Queensland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((148.8473 -2... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1323 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; South Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((137.3481 -3... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 610 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Western Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((126.3868 -1... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 912 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Tasmania &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((147.8397 -4... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Northern Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((136.3669 -1... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 104 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australian Capital Territory &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((149.2317 -3... &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 118 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[

# Choropleth Map &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;


```r
ggplot(covid_states) + 
  geom_sf(aes(fill = CASES))
```

&lt;img src="Index_files/figure-html/covidmap-1.png" width="3600" /&gt;
]



---



```r
*library(ggforce)

ggplot(covid_states) + 
  geom_sf(aes(fill = CASES)) +
*  facet_zoom(xy = NAME == "Australian Capital Territory", zoom.size = 0.6)
```

&lt;img src="Index_files/figure-html/auszoom2-1.png" width="7800" /&gt;

---

class: inverse, center
# Off we go!

&lt;img src="https://simplyettad.files.wordpress.com/2016/05/plane-travel-animated-gif-4.gif" style="position:absolute;bottom:10%;left:25%;height:55%;width:50%;" /&gt;


---

# Covid in Sri Lanka

&lt;img src="images/covidSLpdf.png" style="position:absolute;bottom:15%;left:12%;height:70%;width:35%;" /&gt;


&lt;img src="images/covidSLtable.png" style="position:absolute;bottom:15%;right:12%;height:70%;width:35%;" /&gt;

.footnote[

https://covid19.gov.lk/wp-content/uploads/2021/02/sitrep-sl-en-18-02_10_21.pdf
]

---


### Data: Epidemiology Unit, Ministry of Health





.left-column[


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; DISTRICT &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Count &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; COLOMBO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 26925 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; GAMPAHA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15669 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; PUTTALAM &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1011 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; KALUTARA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5674 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANURADHAPURA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 428 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; KANDY &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3573 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; KURUNEGALA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2040 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; POLONNARUWA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 202 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; JAFFNA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 229 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; RATNAPURA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1661 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]
.right-column[

```r
*library(stringr)
# https://covid19.gov.lk/wp-content/uploads/2021/02/sitrep-sl-en-18-02_10_21.pdf
covid_sl_table &lt;- c("COLOMBO26925GAMPAHA15669PUTTALAM1011KALUTARA5674ANURADHAPURA428KANDY3573KURUNEGALA2040POLONNARUWA202JAFFNA229RATNAPURA1661KEGALLE1315MONERAGALA345KALMUNAI1183MATALE702GALLE1852AMPARA227BADULLA1060MATARA1346BATTICOLOA426HAMBANTOTA539VAVUNIA356TRINCOMALEE463NUWARAELIYA970KILINOCHCHI80MANNAR198MULLATIVU20")

# Extract names of regions, using a regular expression to search for letters
districts &lt;- covid_sl_table %&gt;%
  str_extract_all(string = ., pattern = "[A-Z]*") %&gt;% unlist( ) %&gt;% 
  str_subset(., pattern = "[A-Z]")

# Extract number of cases, using a regular expression to search for numbers
counts &lt;- covid_sl_table %&gt;% 
  str_extract_all(string = ., pattern = "[0-9]*") %&gt;% unlist() %&gt;% 
  str_subset(., pattern = "[0-9]")

# Combine two sets of data to create a table
covid_sl &lt;- tibble(DISTRICT = districts,
                   Count = counts) %&gt;% 
            mutate(Count = parse_number(Count))
```
]

---


# Map data for Sri Lanka



```r
# Select the level 2 districts (adm2)
sf_sl &lt;- read_sf("data/lka_adm_slsd_20200305_shp/lka_admbnda_adm2_slsd_20200305.shp") %&gt;%
  select(ADM2_EN, geometry)
sf_sl
```

```
## Simple feature collection with 26 features and 1 field
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: 79.51916 ymin: 5.918297 xmax: 81.8772 ymax: 9.835718
## geographic CRS: WGS 84
## # A tibble: 26 x 2
##    ADM2_EN                                                              geometry
##    &lt;chr&gt;                                                      &lt;MULTIPOLYGON [Â°]&gt;
##  1 [unknown]   (((79.80303 7.8503, 79.80333 7.849463, 79.80333 7.849463, 79.803~
##  2 Ampara      (((81.23892 7.738495, 81.23903 7.73846, 81.23912 7.738474, 81.23~
##  3 Anuradhapu~ (((80.79126 8.918771, 80.79164 8.918763, 80.79209 8.91885, 80.79~
##  4 Badulla     (((80.9806 7.61768, 80.98104 7.617651, 80.98152 7.617694, 80.982~
##  5 Batticaloa  (((81.76936 7.536074, 81.76918 7.536048, 81.76907 7.536107, 81.7~
##  6 Colombo     (((79.87696 6.98085, 79.87805 6.98068, 79.87808 6.980692, 79.878~
##  7 Galle       (((80.09646 6.132867, 80.09638 6.132866, 80.0963 6.132871, 80.09~
##  8 Gampaha     (((80.14677 7.312115, 80.14689 7.311824, 80.1469 7.311761, 80.14~
##  9 Hambantota  (((81.61401 6.572167, 81.61425 6.572167, 81.61462 6.572185, 81.6~
## 10 Jaffna      (((79.52615 9.383134, 79.52537 9.383026, 79.5245 9.383076, 79.52~
## # ... with 16 more rows
```

```r
# Choose a projection from epsg.io:
sf_sl &lt;- sf_sl %&gt;% st_transform(5235)
```


.footnote[
[5] https://data.humdata.org/dataset/sri-lanka-administrative-levels-0-4-boundaries
]

---

.pull-left[

## Data &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;table class="table" style="font-size: 20px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; DISTRICT &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Count &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; COLOMBO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26925 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; GAMPAHA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15669 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; PUTTALAM &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1011 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; KALUTARA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5674 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANURADHAPURA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 428 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; KANDY &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3573 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; KURUNEGALA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2040 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; POLONNARUWA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 202 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; JAFFNA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 229 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; RATNAPURA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1661 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[

## Map &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;table class="table" style="font-size: 20px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; ADM2_EN &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; geometry &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; [unknown] &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((392952.6 59... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Ampara &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((551311.8 58... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Anuradhapura &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((501928.5 71... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Badulla &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((522825 5682... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Batticaloa &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((609877 5593... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Colombo &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((400911.5 49... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Galle &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((425038.8 40... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gampaha &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((430775.7 53... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hambantota &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((592923.3 45... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Jaffna &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((362968.6 76... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

???

A different problem to the Australia set 

---

# What is this unknown district?

&lt;img src="Index_files/figure-html/lagoon-1.png" width="2700" /&gt;

---


# To join the Covid data to the map

--
.pull-left[
### - Convert the district names to match


```r
covid_sl &lt;- covid_sl %&gt;% 
  # use District names from Covid data
  mutate(DISTRICT = case_when(
          DISTRICT == "BATTICOLOA" ~ "BATTICALOA",
          DISTRICT == "NUWARAELIYA" ~ "NUWARA ELIYA",
          DISTRICT == "MONERAGALA" ~ "MONARAGALA",
          DISTRICT == "MULLATIVU" ~ "MULLAITIVU",
          DISTRICT == "VAVUNIA" ~ "VAVUNIYA",
          TRUE ~ DISTRICT))


sf_sl &lt;- sf_sl %&gt;% 
  mutate(DISTRICT = str_to_upper(ADM2_EN)) %&gt;% 
  select(-ADM2_EN) 
```
]

.pull-right[

### - Peform a join


```r
covid_districts_sl &lt;- left_join(sf_sl, covid_sl,
                   by = c("DISTRICT"))
```

### - Remove the "[unknown]"


```r
covid_districts_sl &lt;- covid_districts_sl %&gt;% 
              filter(!(DISTRICT == "[UNKNOWN]")) %&gt;% 
              filter(!(DISTRICT == "KALMUNAI")) %&gt;% 
  # adjust case numbers
  # city of Kalmunai in Ampara 1183+227 = 1410
  mutate(Count = ifelse(DISTRICT == "AMPARA",
                        1410, Count)) 
```

]

---


.pull-left[

# Complete map data &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; geometry &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; DISTRICT &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Count &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((551311.8 58... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; AMPARA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1410 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((501928.5 71... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANURADHAPURA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 428 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((522825 5682... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BADULLA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1060 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((609877 5593... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BATTICALOA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 426 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((400911.5 49... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; COLOMBO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26925 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((425038.8 40... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; GALLE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1852 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((430775.7 53... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; GAMPAHA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15669 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((592923.3 45... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; HAMBANTOTA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 539 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((362968.6 76... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JAFFNA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 229 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((411888.2 43... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; KALUTARA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5674 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((520143.4 55... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; KANDY &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3573 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((432117.3 52... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; KEGALLE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1315 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((415223 7518... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; KILINOCHCHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((425843.2 63... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; KURUNEGALA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2040 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MULTIPOLYGON (((405858.7 70... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MANNAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 198 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[

# Choropleth Map &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"&gt;&lt;/path&gt;&lt;/svg&gt;

&lt;img src="Index_files/figure-html/coviddistrictsmap-1.png" width="1200" /&gt;
]


---

class: inverse, center

# What should we continue to ask ourselves?

--

## How can we improve?

---

class: inverse, center
# Off we go!

&lt;img src="https://simplyettad.files.wordpress.com/2016/05/plane-travel-animated-gif-4.gif" style="position:absolute;bottom:10%;left:25%;height:55%;width:50%;" /&gt;


---

# We can use projections

--


### A projection converts the 3D globe, into to a 2D representation


&lt;img src="images/ggchoro.png" style="position:absolute;bottom:-20%;left:20%;height:100%;width:65%;" /&gt;

---


&lt;img src="images/epsgio.png" style="position:absolute;bottom:2%;left:10;height:110%;width:80%;" /&gt;

.footnote[
[4] https://epsg.io/3857
]
---

# Common Projections


--

&lt;img src="images/gg4326.png" style="position:absolute;bottom:10%;left:0%;height:50%;width:33%;" /&gt;

EPSG: 4326, World Geodetic System 1984, used in GPS  

--

&lt;img src="images/gg2163.png" style="position:absolute;bottom:10%;left:33%;height:50%;width:33%;" /&gt;

EPSG: 2163, US National Atlas Equal Area, spherical projection

--

&lt;img src="images/gg8826.png" style="position:absolute;bottom:10%;right:0%;height:50%;width:33%;" /&gt;

EPSG: 8826, North American Datum 1983

---


# Choropleths

- Familiar shapes of areas

- Familiar boundary relationships

- Identify spatial structures and patterns

### However, if we have:

- sparsely populated rural areas are easy to see

- densely populated inner city areas are geographically small



---

class: inverse, center

# What are we trying to communicate?

---

class: center
# What are the alternatives?

&lt;img src="images/ggcont.png" style="position:absolute;bottom:45%;left:0%;height:50%;width:50%;" /&gt;
&lt;img src="images/ggncont.png" style="position:absolute;bottom:45%;right:0%;height:50%;width:50%;" /&gt;
&lt;img src="images/ggdorl.png" style="position:absolute;bottom:4%;left:0%;height:55%;width:50%;" /&gt;
&lt;img src="images/gghexmap.png" style="position:absolute;bottom:4%;right:0%;height:50%;width:50%;" /&gt;

.left[
.footnote[
[3] https://www.researchgate.net/publication/347076645_Mapping_cancer_the_potential_of_cartograms_and_alternative_map_displays
]
]
???

Our paper covers in detail and has lots of examples of world wide cancer atlases

---

# Cartograms



### - augment the size, shape, or distance of geographical areas

### - sizes areas by the value of a statistic, not earth size area

### - account for the population density, reveal hidden spatial patterns

### - reducing the visual impact of large areas with small populations


???

map creators can use white lies to create useful displays by distorting the geometry and suppressing features.   [26]. The distortion in an area cartogram accounts for
the population density, preventing it from obscuring the spatial patterns [27]. 

---

class: inverse, center
# Off we go!

&lt;img src="https://simplyettad.files.wordpress.com/2016/05/plane-travel-animated-gif-4.gif" style="position:absolute;bottom:10%;left:25%;height:55%;width:50%;" /&gt;

---

# Population


```r
*library(rvest)
*library(polite)

pop_url &lt;- "https://www.citypopulation.de/en/srilanka/prov/admin/"

pop_table &lt;- bow(pop_url) %&gt;% 
  scrape() %&gt;% 
  html_table() %&gt;% 
  purrr::pluck(1)

pop_data &lt;- pop_table %&gt;% 
  select(DISTRICT = Name, Status,
         population = `PopulationEstimate2020-07-01`) %&gt;% 
  filter(Status == "District") %&gt;% 
  mutate(DISTRICT = str_to_upper(DISTRICT)) %&gt;% 
  mutate(DISTRICT = ifelse(
   DISTRICT == "MONERAGALA", "MONARAGALA", DISTRICT)) %&gt;% 
  mutate(population = parse_number(population))


covid_districts_sl &lt;- left_join(covid_districts_sl, pop_data)
```


---

# Contiguous Cartogram

.pull-left[

```r
*library(cartogram)
cont &lt;- cartogram_cont(covid_districts_sl,
                       weight = "population") %&gt;%
                      st_as_sf()

ggplot(cont) + 
  geom_sf(aes(fill = Count), colour = NA) + 
  scale_fill_distiller(type = "seq", 
                       palette = "RdPu",  
                       direction = 1)
```

]
.pull-right[
&lt;img src="Index_files/figure-html/contfig-1.png" width="504" /&gt;

]
---

# Non-Contiguous Cartogram
.pull-left[

```r
ncont &lt;- cartogram_ncont(covid_districts_sl,
                       weight = "population") %&gt;%
                      st_as_sf()

ggplot(ncont) + 
  geom_sf(data = covid_districts_sl) +
  geom_sf(aes(fill = Count), colour = NA) + 
  scale_fill_distiller(type = "seq", 
                       palette = "RdPu",  
                       direction = 1)
```

]
.pull-right[
&lt;img src="Index_files/figure-html/ncontfig-1.png" width="504" /&gt;

]
---

# Dorling Cartogram
.pull-left[

```r
dorl &lt;- cartogram_dorling(covid_districts_sl,
                       weight = "population") %&gt;%
                      st_as_sf()

ggplot(dorl) + 
  geom_sf(data = covid_districts_sl) +
  geom_sf(aes(fill = Count), colour = NA) + 
  scale_fill_distiller(type = "seq", 
                       palette = "RdPu",  
                       direction = 1)
```

]
.pull-right[
&lt;img src="Index_files/figure-html/dorlfig-1.png" width="504" /&gt;
]

---

class: top, center, inverse

&lt;img src="https://media.giphy.com/media/SufoKsersIO2Y/giphy.gif"  style="position:absolute;bottom:50px;left:40%;height:50%;width:20%;" /&gt;

# Ask me a question

### Use the chat
### Answer in discussion time

???
---


class: center, middle

# Thank you for listening!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](https://yihui.org/knitr), and [R Markdown](https://rmarkdown.rstudio.com).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
